<!DOCTYPE html>
<html lang="en" id="oranda" class="dark axo">
  <head>
    <title>cargo-dist</title>
    
      <meta property="og:url" content="https://opensource.axo.dev/cargo-dist/" />
    
    
      <link rel="icon" href="/cargo-dist/favicon.ico" />
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
      <meta name="description" content="Shippable application packaging for Rust" />
      <meta property="og:description" content="Shippable application packaging for Rust" />
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="cargo-dist" />
    
      <meta name="twitter:card" content="summary_large_image" />
      <meta property="og:image" content="https://www.axo.dev/meta_small.jpeg" />
    
    
      <meta property="og:image:alt" content="axo" />
    
    
      <meta name="twitter:creator" content="@axodotdev" />
      <meta name="twitter:site" content="@axodotdev" />
    
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()" />
    <link rel="stylesheet" href="/cargo-dist/oranda-v0.6.1.css" />
    
    
  </head>
  <body>
    <div class="container">
      <div class="page-body">
        
          <div class="repo_banner">
            <a href="https://github.com/axodotdev/cargo-dist">
              <div class="github-icon" aria-hidden="true"></div>
              Check out our GitHub!
            </a>
          </div>
        

        <main>
          <header>
            
            <h1 class="title">cargo-dist</h1>
            
  <nav class="nav">
    <ul>
      <li><a href="/cargo-dist/">Home</a></li>

      

      
        <li><a href="/cargo-dist/artifacts/">Install</a></li>
      

      
        <li><a href="/cargo-dist/book/">Docs</a></li>
      

      

      
        <li><a href="/cargo-dist/changelog/">Changelog</a></li>
      
    </ul>
  </nav>

          </header>

          
  <div>
    <h1>Version 0.22.0 (2024-08-28)</h1>
    <div class="releases-body">
      
      
      <section class="release ">
  
  <div class="release-info">
    <span class="flex items-center gap-2">
      <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-6 h-6'>
    <path stroke-linecap='round' stroke-linejoin='round' d='M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z' />
    <path stroke-linecap='round' stroke-linejoin='round' d='M6 6h.008v.008H6V6z' /></svg>
      v0.22.0
    </span>
    <span class="flex items-center gap-2">
      
        <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-6 h-6'><path stroke-linecap='round' stroke-linejoin='round' d='M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5' /></svg>
        Aug 29 2024 at 00:21 UTC
      
    </span>
  </div>
  <div class="release-body">
    <p>This patch release fixes several bugs and provides some nice quality of life improvements. These fixes are largely related to our installers, shell, powershell, and homebrew as well as managing some papercuts in the <code>dist init</code> command and error handling.</p>
<h2>App-branded installer environment variables</h2>
<p>We generate installers for our users- and then our <em>users' users</em> use those installers. Those users don't know they are using <code>dist</code> and, if we do our job right, should never have to.</p>
<p>While we had implemented some environment variables that enable users to control the behavior of installers, previously they were largely designed for internal use, and therefore namespaced with <code>DIST</code>. However, we quickly realized that this isn't suitable for having our users communicate with their users- so we've enabled the generation of app-branded installer customization environment variables- so that installer users can leverage environment variables that are branded to the application they are trying to install.</p>
<p>Right now, the only customization we allow for installers is the install directory- so instead of <code>CARGO_DIST_FORCE_INSTALL_DIR</code>, you can tell your users to use <code>AXOLOTLSAY_INSTALL_DIR</code> (if your app is named <code>axolotlsay</code>). If you have a name with hyphens or other characters, we normalize it for you, and you can find this value at the <code>install_dir_env_var</code> field in the <code>dist-manifest.json</code> that is generated with each of your releases.</p>
<ul>
<li>impl @mistydemeo <a href="https://github.com/axodotdev/cargo-dist/pull/1377" rel="noopener noreferrer">add app branded env var for custom dir to installers</a></li>
</ul>
<h2>Homebrew license metadata</h2>
<p>Currently, when publishing to a Homebrew tap, whatever string is in the project's license field (usually a SPDX license expression) gets passed into license in the Homebrew formula. However, rather than using SPDX syntax, Homebrew has its own ruby syntax for specifying licenses. So, when passed an SPDX expression, Homebrew:</p>
<ul>
<li>Cannot provide as detailed information about the package's licensing.</li>
<li>Throws errors when linting the formula with brew audit/brew test-bot.</li>
</ul>
<p>This PR translates the SPDX expression to the Homebrew license DSL.</p>
<ul>
<li>impl @cxreiff <a href="https://github.com/axodotdev/cargo-dist/pull/1345" rel="noopener noreferrer">translate SPDX expressions to Homebrew license DSL to produce better Homebrew package metadata</a></li>
</ul>
<h2>Homebrew compliance (<code>brew style</code>)</h2>
<p>Creating a personal tap with brew tap-new creates a default Github Actions workflow that runs a homebrew-specific style check (brew style ) on the repo. Cargo-dist's generated homebrew formulas fail this style check. This does not block the core functionality of cargo-dist's homebrew publishing functionality (formula still functions), but does mean that users whorun <code>brew style</code> (which is a side effect of creating a tap with <code>brew tap-new</code>) would get frustrating errors.</p>
<p>Rather than separately chasing formatting issues as they come up, this PR updates the homebrew publish workflow to install and run <code>brew style --fix</code> on each formula before committing it.</p>
<ul>
<li>impl
<ul>
<li>@cxreiff <a href="https://github.com/axodotdev/cargo-dist/pull/1340" rel="noopener noreferrer">format homebrew formulas with brew style --fix</a></li>
<li>@mistydemeo <a href="https://github.com/axodotdev/cargo-dist/pull/1354" rel="noopener noreferrer">enable brew style linters in tests</a></li>
</ul>
</li>
</ul>
<h2>Fixes</h2>
<ul>
<li>@mistydemeo <a href="https://github.com/axodotdev/cargo-dist/pull/1379" rel="noopener noreferrer">enable powershell installer to respect NoModifyPath from env</a></li>
<li>@gankra <a href="https://github.com/axodotdev/cargo-dist/pull/1373" rel="noopener noreferrer">improve powershell installer portability by updating ExecutionPolicy flag and offering better hints</a></li>
<li>@mistydemeo <a href="https://github.com/axodotdev/cargo-dist/pull/1357" rel="noopener noreferrer">handle <code>ar</code> archives when parsing Windows objects, ensure unsupported binary linkage checks are non-fatal, and improve linkage checker errors</a></li>
<li>@gankra <a href="https://github.com/axodotdev/cargo-dist/pull/1360" rel="noopener noreferrer">improve <code>init</code> errors for custom projects, and ensure prompts are more contextual</a></li>
<li>@mistydemeo <a href="https://github.com/axodotdev/cargo-dist/pull/1358" rel="noopener noreferrer">update reference to renamed config in error message</a></li>
</ul>

  </div>
</section>
    </div>
  </div>

        </main>
      </div>

      <footer>
        
          <a href="https://github.com/axodotdev/cargo-dist"><div class="github-icon" aria-hidden="true"></div></a>
        
        <span>
          cargo-dist, MIT OR Apache-2.0
        </span>
      </footer>
    </div>

    
      <script defer="true" data-domain="opensource.axo.dev" src="https://plausible.io/js/script.js"></script>
    
    

    
  </body>
</html>